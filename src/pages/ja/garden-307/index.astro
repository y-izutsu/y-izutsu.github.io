---
import PageLayout from '~/layouts/PageLayout_PochomLab_Ja.astro';
import GardenCard from '~/components/widgets/GardenCard.astro';

import { getCollection } from 'astro:content';

const entries = (await getCollection('garden307', ({ data }) => !data.draft))
  .sort((a, b) => (a.data.order ?? 9999) - (b.data.order ?? 9999));
---

<PageLayout>

<section class="container mx-4 max-w-5xl py-16">
  <h1 class="font-serif text-3xl md:text-4xl text-neutral-900 dark:text-neutral-50">
    🌳 307の庭 🌳
  </h1>
  <p class="mt-4 text-neutral-600 dark:text-neutral-300">
    ゆくゆくカード形式で、絵書作者（エショナー）を追加していきます。
  </p>

  {entries.length > 0 ? (
    <div class="mt-12 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {entries.map((e) => (
        <GardenCard
          href={e.data.links?.site ?? e.data.links?.x ?? "#"}
          external={true}
          title={e.data.title}
          description={e.data.description}
          comment={e.data.comment}
          avatar={e.data.avatar}
          role={e.data.role}
        />
      ))}
    </div>
  ) : (
    <div class="mt-12 rounded-2xl border border-dashed border-neutral-300 p-10 text-neutral-600 dark:border-neutral-700 dark:text-neutral-300">
      準備中。カードは順次追加されます。
    </div>
  )}
</section>

</PageLayout>
