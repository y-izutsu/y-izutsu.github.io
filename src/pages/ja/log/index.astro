---
import PageLayout from '~/layouts/PageLayout_PochomLab_Ja.astro'; // ä½¿ã£ã¦ã‚‹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«åˆã‚ã›ã¦å¤‰æ›´OK
import { getCollection } from 'astro:content';

const all = await getCollection('log-ja', ({ data }) => !data.draft);
const logs = all.filter((e) => !e.data.draft).sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<PageLayout
  metadata={{
    title: 'Log',
    description: 'PochomLab ä½œæ¥­ãƒ¡ãƒ¢ï¼ˆãƒ‘ã‚¤ãƒ­ãƒƒãƒˆç‰ˆï¼‰',
  }}
>
  <section class="py-16">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <header class="mb-10">
        <h1 class="text-3xl md:text-4xl font-semibold tracking-tight">ğŸ“ƒ Log</h1>
        <p class="mt-4 text-neutral-600 dark:text-neutral-300">
          ã„ã¾ã¯ä½œæ¥­ãƒ¡ãƒ¢ç½®ãå ´ã€‚æ­£å¼ãƒªãƒªãƒ¼ã‚¹æ™‚ã«æ•´å½¢ã™ã‚‹å‰æã®ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆç‰ˆã€‚
        </p>
      </header>

      <div class="grid gap-6 md:grid-cols-2">
        {
          logs.map((entry) => (
            <a
              class="group rounded-2xl border border-neutral-200/70 dark:border-neutral-800 bg-white/60 dark:bg-neutral-900/40 p-6 hover:shadow-sm transition"
              href={`/ja/log/${entry.slug}`}
            >
              <div class="flex items-start justify-between gap-4">
                <h2 class="text-lg font-semibold group-hover:underline underline-offset-4">{entry.data.title}</h2>
                <time class="text-xs text-neutral-500 dark:text-neutral-400 whitespace-nowrap">
                  {entry.data.date.toISOString().slice(0, 10)}
                </time>
              </div>

              {entry.data.summary && (
                <p class="mt-3 text-sm text-neutral-600 dark:text-neutral-300">{entry.data.summary}</p>
              )}

              {entry.data.tags?.length ? (
                <div class="mt-4 flex flex-wrap gap-2">
                  {entry.data.tags.map((t) => (
                    <span class="text-xs rounded-full px-2 py-1 bg-neutral-100 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200">
                      {t}
                    </span>
                  ))}
                </div>
              ) : null}
            </a>
          ))
        }
      </div>
    </div>
  </section>
</PageLayout>
