---
import Layout from '~/layouts/PageLayout_PochomLab_Ja.astro'; // ここも合わせて変更OK
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const entries = await getCollection('log-ja', ({ data }) => !data.draft);
  return entries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout
  metadata={{
    title: entry.data.title,
    description: entry.data.summary ?? 'PochomLab Log',
  }}
>
  <article class="py-16 md:py-24">
    <div class="container mx-auto max-w-3xl">
      <a class="text-sm text-neutral-500 hover:underline" href="/ja/log">← Log に戻る</a>

      <header class="mt-6">
        <h1 class="text-3xl md:text-4xl font-semibold tracking-tight">{entry.data.title}</h1>

        <div class="mt-3 flex flex-wrap items-center gap-3 text-sm text-neutral-500 dark:text-neutral-400">
          <time>{entry.data.date.toISOString().slice(0, 10)}</time>
          {entry.data.tags?.length ? (
            <span>•</span>
          ) : null}
          {entry.data.tags?.length ? (
            <div class="flex flex-wrap gap-2">
              {entry.data.tags.map((t) => (
                <span class="text-xs rounded-full px-2 py-1 bg-neutral-100 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-200">
                  {t}
                </span>
              ))}
            </div>
          ) : null}
        </div>
      </header>

      <div class="prose prose-lg max-w-4xl dark:prose-invert mt-8">
        <Content />
      </div>
    </div>
  </article>
</Layout>
